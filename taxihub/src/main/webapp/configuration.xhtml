<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:h="http://xmlns.jcp.org/jsf/html">

<!--@elvariable id="msg" type="vn.ontaxi.messages.ResourceBundleBean"-->
<!--@elvariable id="configurationComponent" type="vn.ontaxi.hub.component.ConfigurationComponent"-->
<ui:composition template="layout.xhtml">
    <ui:define name="content">
        <p:tabView>
            <p:tab title="#{msg.promotion_plan}">
                <h:form>
                    <!--@elvariable id="configurationComponent" type="vn.ontaxi.hub.component.ConfigurationComponent"-->
                    <p:dataTable value="#{configurationComponent.promotionPlans}" var="promotionPlan">
                        <p:column headerText="#{msg.distance_from} KM">
                            <p:outputLabel value="#{promotionPlan.from_distance}"/>
                        </p:column>
                        <p:column headerText="#{msg.distance_to} KM">
                            <p:outputLabel value="#{promotionPlan.to_distance}"/>
                        </p:column>
                        <p:column headerText="#{msg.monday}">
                            <p:inputText value="#{promotionPlan.monday_percentage}">
                                <p:ajax event="blur" update="@form" listener="#{configurationComponent.savePromotion(promotionPlan)}"/>
                            </p:inputText>
                        </p:column>
                        <p:column headerText="#{msg.tuesday}">
                            <p:inputText value="#{promotionPlan.tuesday_percentage}">
                                <p:ajax event="blur" update="@form" listener="#{configurationComponent.savePromotion(promotionPlan)}"/>
                            </p:inputText>
                        </p:column>
                        <p:column headerText="#{msg.wednesday}">
                            <p:inputText value="#{promotionPlan.wednesday_percentage}">
                                <p:ajax event="blur" update="@form" listener="#{configurationComponent.savePromotion(promotionPlan)}"/>
                            </p:inputText>
                        </p:column>
                        <p:column headerText="#{msg.thursday}">
                            <p:inputText value="#{promotionPlan.thursday_percentage}">
                                <p:ajax event="blur" update="@form" listener="#{configurationComponent.savePromotion(promotionPlan)}"/>
                            </p:inputText>
                        </p:column>
                        <p:column headerText="#{msg.friday}">
                            <p:inputText value="#{promotionPlan.friday_percentage}">
                                <p:ajax event="blur" update="@form" listener="#{configurationComponent.savePromotion(promotionPlan)}"/>
                            </p:inputText>
                        </p:column>
                        <p:column headerText="#{msg.saturday}">
                            <p:inputText value="#{promotionPlan.saturday_percentage}">
                                <p:ajax event="blur" update="@form" listener="#{configurationComponent.savePromotion(promotionPlan)}"/>
                            </p:inputText>
                        </p:column>
                        <p:column headerText="#{msg.sunday}">
                            <p:inputText value="#{promotionPlan.sunday_percentage}">
                                <p:ajax event="blur" update="@form" listener="#{configurationComponent.savePromotion(promotionPlan)}"/>
                            </p:inputText>
                        </p:column>
                    </p:dataTable>
                </h:form>
            </p:tab>
            <p:tab title="#{msg.setup_unit_price}">
                <h:form>
                    <table>
                        <tr>
                            <td>
                                4 Chỗ
                            </td>
                            <td>
                                <p:inputText value="#{configurationComponent.priceConfiguration.normal_4}"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                5 Chỗ
                            </td>
                            <td>
                                <p:inputText value="#{configurationComponent.priceConfiguration.good_4}"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                7 Chỗ
                            </td>
                            <td>
                                <p:inputText value="#{configurationComponent.priceConfiguration.normal_7}"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                16 Chỗ
                            </td>
                            <td>
                                <p:inputText value="#{configurationComponent.priceConfiguration.normal_16}"/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Phần % Chiều Về
                            </td>
                            <td>
                                <p:inputText value="#{configurationComponent.priceConfiguration.return_round_percentage}"/>
                            </td>
                        </tr>
                    </table>
                    <p:commandButton action="#{configurationComponent.savePriceConfiguration()}" update="@form" title="#{msg.update_unit_price}"/>
                </h:form>
            </p:tab>
            <p:tab title="#{msg.setup_fee_percentage}">
                <h:form>
                    <table>
                        <tr>
                            <td>
                                Chiết Khấu Mặc Định
                            </td>
                            <td>
                                <p:selectOneMenu id="feePercentage" value="#{configurationComponent.feeConfiguration.defaultFeePercentage}">
                                    <f:selectItems value="#{selectItemGenerator.feePercentageSelectItems}"/>
                                    <p:ajax update="feePercentage" listener="#{configurationComponent.saveFeeConfiguration}"/>
                                </p:selectOneMenu>
                            </td>
                        </tr>
                    </table>
                </h:form>
            </p:tab>
            <p:tab title="#{msg.setup_notification}">
                <h:form>
                    <table>
                        <tr>
                            <td>
                                Email Thông Báo Đơn Hàng Mới
                            </td>
                            <td>
                                <p:inputText value="#{configurationComponent.notificationConfiguration.newOrderNotificationEmail}"/>
                            </td>
                        </tr>
                    </table>
                    <p:commandButton action="#{configurationComponent.saveNotificationConfiguration()}" update="@form" title="#{msg.update}"/>
                </h:form>
            </p:tab>
        </p:tabView>
    </ui:define>
</ui:composition>
</html>
