<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:p="http://primefaces.org/ui">
<!--@elvariable id="msg" type="vn.ontaxi.messages.ResourceBundleBean"-->
<!--@elvariable id="driverDetailComponent" type="vn.ontaxi.hub.component.DriverDetailComponent"-->
<!--@elvariable id="selectItemGenerator" type="vn.ontaxi.hub.component.SelectItemGenerator"-->
<ui:composition template="layout.xhtml">
    <ui:define name="content">
        <h1 align="center">#{msg.driver_detail}</h1>
        <p:spacer height="10px"/>

        <p:tabView>
            <p:tab title="#{msg.general_info}">
                <h:form id="newOrderForm">

                    <table cellspacing="5px">
                        <tr>
                            <td class="label">
                                #{msg.full_name}
                            </td>
                            <td>
                                <p:inputText id="name" label="#{msg.full_name}" type="text" value="#{driverDetailComponent.newDriver.name}" requiredMessage="${msg.require_field}" required="true"/>
                                <p:message for="name"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.birthday}
                            </td>
                            <td>
                                <p:calendar id="birthday" required="true" pattern="dd-MM-yyyy" mask="true" requiredMessage="${msg.require_field}" value="#{driverDetailComponent.newDriver.birthDay}"/>
                                <p:message for="birthday"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.mobile}
                            </td>
                            <td>
                                <p:inputText id="mobile" label="#{msg.mobile}" type="text" value="#{driverDetailComponent.newDriver.mobile}" requiredMessage="${msg.require_field}" required="true"/>
                                <p:message for="mobile"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.email}
                            </td>
                            <td>
                                <p:inputText id="email" label="#{msg.email}" type="text" value="#{driverDetailComponent.newDriver.email}" requiredMessage="${msg.require_field}" required="true"/>
                                <p:message for="email"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.identity}
                            </td>
                            <td>
                                <p:inputText id="identity" value="#{driverDetailComponent.newDriver.identity}" required="true" requiredMessage="${msg.require_field}"/>
                                <p:message for="identity"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.bank_account}
                            </td>
                            <td>
                                <p:inputText id="bank_account" value="#{driverDetailComponent.newDriver.bankId}" required="true" requiredMessage="${msg.require_field}"/>
                                <p:message for="bank_account"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                ${msg.address}
                            </td>
                            <td>
                                <p:inputText required="true" id="address" value="#{driverDetailComponent.newDriver.address}" requiredMessage="${msg.require_field}"/>
                                <p:message for="address"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.dia_chi_thuong_tru}
                            </td>
                            <td>
                                <p:inputText required="true" id="dia_chi_thuong_tru" value="#{driverDetailComponent.newDriver.currentAddress}" requiredMessage="${msg.require_field}"/>
                                <p:message for="dia_chi_thuong_tru"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.bang_lai}
                            </td>
                            <td>
                                <p:inputText required="true" id="bang_lai" placeholder="Số bằng lái" value="#{driverDetailComponent.newDriver.licenseNumber}" requiredMessage="${msg.require_field}"/>
                                <p:message for="bang_lai"/>
                            </td>
                            <td>
                                <p:selectOneMenu value="#{driverDetailComponent.newDriver.licenseType}">
                                    <f:selectItem itemValue="B1" itemLabel="B1"/>
                                    <f:selectItem itemValue="B2" itemLabel="B2"/>
                                    <f:selectItem itemValue="C" itemLabel="C"/>
                                </p:selectOneMenu>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.loai_xe}
                            </td>
                            <td>
                                <p:selectOneMenu value="#{driverDetailComponent.newDriver.carType}">
                                    <f:selectItems value="#{selectItemGenerator.carTypeSelectItems}"/>
                                </p:selectOneMenu>
                            </td>
                            <td>
                                <p:inputText id="car_brand" placeholder="Hãng xe" required="true" value="#{driverDetailComponent.newDriver.carBrand}" requiredMessage="${msg.require_field}"/>
                                <p:message for="car_brand"/>
                            </td>
                            <td>
                                <p:inputText id="doi_xe" placeholder="Đời xe" required="true" value="#{driverDetailComponent.newDriver.manufactureYear}" requiredMessage="${msg.require_field}"/>
                                <p:message for="doi_xe"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.license_plates}
                            </td>
                            <td>
                                <p:inputText id="license_plates" label="#{msg.license_plates}" type="text" value="#{driverDetailComponent.newDriver.license_plates}" required="true"
                                             requiredMessage="${msg.require_field}"/>
                                <p:message for="license_plates"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.airport}
                            </td>
                            <td>
                                <p:selectBooleanCheckbox value="#{driverDetailComponent.newDriver.airport}"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.level}
                            </td>
                            <td>
                                <p:selectOneMenu value="#{driverDetailComponent.newDriver.level}">
                                    <f:selectItem itemLabel="Ưu Tiên" itemValue="1"/>
                                    <f:selectItem itemLabel="Bình Thường" itemValue="2"/>
                                </p:selectOneMenu>
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                #{msg.status}
                            </td>
                            <td>
                                <p:selectOneMenu value="#{driverDetailComponent.newDriver.status}" disabled="true" id="status" style="margin-right: 10px">
                                    <f:selectItem itemLabel="Chưa kích hoạt" itemValue="REGISTRY"/>
                                    <f:selectItem itemLabel="Đã kích hoạt" itemValue="ACTIVATED"/>
                                    <f:selectItem itemLabel="Đã khóa" itemValue="BLOCKED"/>
                                </p:selectOneMenu>
                                <p:commandButton style="margin-right: 10px" process="@this" update="status" styleClass="btn btn-line"
                                                 actionListener="#{driverDetailComponent.newDriver.setStatus('ACTIVATED')}" value="Kích Hoạt"/>
                                <p:commandButton process="@this" update="status" styleClass="btn btn-primary" actionListener="#{driverDetailComponent.newDriver.setStatus('BLOCKED')}"
                                                 value="Khóa Tài Khoản"/>
                            </td>
                        </tr>
                    </table>

                    <div>
                        <p:commandButton value="#{msg.save_driver}" action="#{driverDetailComponent.addNewDriver}" update="@form"/>
                    </div>
                </h:form>
            </p:tab>
            <p:tab title="#{msg.transaction}">
                <div>
                    <h:form>
                        <h:commandButton value="#{msg.export_financial_report}" action="#{driverDetailComponent.exportFinancialReport}" update="@form"/>
                    </h:form>
                </div>
                <p:spacer height="10px"/>
                <table>
                    <tr>
                        <td class="label">
                            <h:outputLabel value="#{msg.amount}"/>
                        </td>
                        <td>
                            <h:outputText value="#{numberFormatterComponent.formatPrice(driverDetailComponent.newDriver.amount)}"/>
                        </td>
                    </tr>
                </table>
                <p:spacer height="10px"/>
                <p:dataTable value="#{driverDetailComponent.driverTransactions}" var="driverTransaction">
                    <p:column headerText="#{msg.payment_type}">
                        <h:outputText id="paymentType" value="#{driverTransaction.paymentType eq 'RC' ? msg.debit : msg.credit}"/>
                    </p:column>
                    <p:column headerText="#{msg.amount}">
                        <!--@elvariable id="numberFormatterComponent" type="vn.ontaxi.hub.component.NumberFormatterComponent"-->
                        <p:outputLabel value="#{numberFormatterComponent.formatPrice(driverTransaction.amount)}"/>
                    </p:column>
                    <p:column headerText="#{msg.reason}">
                        <h:outputText value="#{driverTransaction.reason}"/>
                    </p:column>
                    <p:column headerText="#{msg.transaction_time}">
                        <h:outputText value="#{driverTransaction.lastUpdatedDatetime}">
                            <f:convertDateTime pattern="dd-MM-yyyy HH:mm"/>
                        </h:outputText>
                    </p:column>
                </p:dataTable>
            </p:tab>
        </p:tabView>
    </ui:define>
</ui:composition>
</html>
